<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>



<div class='col-12'>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<div style='width: 800px;'>
  <div id="basic_map" style='width: 800px; height: 400px;'></div>
</div>
    


<div class='col-8 offset2'>
	<div class="panel-group" id="accordion">

	  <div class="panel panel-default">
	    <div class="panel-heading">
	      <h4 class="panel-title">
	        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
	          Trip Information
	        </a>
	      </h4>
	    </div>
	    <div id="collapseOne" class="panel-collapse collapse in">
	      <div class="panel-body">
	        <tr>
		        <td><h4>Name: <%= @trip.name %></h4></td>

		        <td><h4>Score: <%= @trip.score.score.round(2) %></h4></td>
		        <td><h4>Date: <%= @trip.time_stamp %></h4></td>
		        <td><h4>Duration: <%= get_hours(@trip.duration) %> hrs <%= get_mins(@trip.duration) %> mins <%= get_secs(@trip.duration) %> secs</h4></td>
		        <td><h4>Distance: <%= @trip.distance.round(2) %> miles</h4></td>

      		</tr>
	      </div>
	    </div>
	  </div>

	  <div class="panel panel-default">
	    <div class="panel-heading">
	      <h4 class="panel-title">
	        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
	         	Analysis
	        </a>
	      </h4>
	    </div>
	    <div id="collapseTwo" class="panel-collapse collapse">
	      <div class="panel-body">
			<%= content_tag "div", id: "scores", data: {scores: [@trip.score.score, @trip.score.scoreBreaks, @trip.score.scoreAccels, @trip.score.scoreTurns, @trip.score.scoreLaneChanges], averages: [@scores.average(:score), @scores.average(:scoreBreaks), @scores.average(:scoreAccels), @scores.average(:scoreTurns), @scores.average(:scoreLaneChanges)]} do %>
			<% end %>
			<div class="third widget line">
			    <div class="chart-legend">
			        <h3>Score Comparison</h3>
			        <p><span>This Trip</span> &mdash; <strong>Average Trip for <%= @trip.user.email %></strong></p>
			    </div>
			    <div class="canvas-container">
			        <canvas id="canvas" width="1100" height="500"></canvas>
			    </div>
			</div>
	      </div>
	    </div>
	  </div>

	  <div class="panel panel-default">
	    <div class="panel-heading">
	      <h4 class="panel-title">
	        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
	         	Edit Details
	        </a>
	      </h4>
	    </div>
	    <div id="collapseThree" class="panel-collapse collapse">
	      <div class="panel-body">
	        ?????Details?????
	      </div>
	    </div>
	  </div>

	</div>
</div>



<script type="text/javascript">
    handler2 = Gmaps.build('Google');
    handler2.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
        markers2 = handler2.addMarkers(<%=raw @hash.to_json %>);
        polyline2 = handler2.addPolyline(<%=raw @polylines.to_json %>); 
        handler2.bounds.extendWith(polyline2);
        handler2.fitMapToBounds();
    });


    handler2 = Gmaps.build('Google');
    handler2.buildMap({ provider: {}, internal: {id: 'basic_map'}}, function(){
        markers2 = handler2.addMarkers(<%=raw @hash.to_json %>);
        polyline2 = handler2.addPolyline(<%=raw @polylines.to_json %>); 
        handler2.bounds.extendWith(polyline2);
        handler2.fitMapToBounds();
    });

</script>


