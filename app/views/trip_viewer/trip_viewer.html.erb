<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>


<p>KNOWN ISSUE: if map does not appear, please refresh the page. JS loading error.</p>

<div class='col-12'>

<div class='row'></div>
	<div id="map"></div>
</div>


<div class='row'></div>
	<div class='col-8 offset2'>
	  <tr>
        <td><h4>Name: <%= @trip.name %></h4></td>
        <td><h4>Score: <%= @trip.score %></h4></td>
        <td><h4>Date: <%= @trip.time_stamp %></h4></td>
        <td><h4>Duration: <%= @trip.duration %></h4></td>
        <td><h4>Distance: <%= @trip.distance %></h4></td>
        <td>
      </tr>
	</div>
</div>
</div>

<script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
        markers = handler.addMarkers(<%=raw @hash.to_json %>);
        polyline = handler.addPolyline(<%=raw @polylines.to_json %>); 
        handler.bounds.extendWith(polyline);
        handler.fitMapToBounds();
    });
    
	
    
</script>
