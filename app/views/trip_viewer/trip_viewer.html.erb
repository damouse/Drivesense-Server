<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>

<div class="container">
    <div class="row">

		<div class='span8'>
			<div id="map"></div>
		</div>

		<div class="span3">
			<br>
			<br>
			<td><h4>Name: <%= @trip.name %></h4></td>
			<td><h4>Score: <%= @trip.score.score.round(2) %></h4></td>
			<td><h4><%= @trip.time_stamp.strftime('%a %b %d %Y %r') %></h4></td>
			<td><h4>Duration: <%= get_hours(@trip.duration) %> hrs <%= get_mins(@trip.duration) %> mins <%= get_secs(@trip.duration) %> secs</h4></td>
			<td><h4>Distance: <%= @trip.distance.round(2) %> miles</h4></td>
		
		</div>
	</div>
</div>

<br>

<a href="#" class="btn btn-lg btn-primary btn-block"
   data-toggle="modal"
  data-target="#basicModal">Trip vs. Average</a>

  <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">

              <div class="modal-body" id="chart1">
                  <%= high_chart("graph", @chart) %>
              </div>

              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
            
        </div>
      </div>
  </div>
  <br>
<a href="#" class="btn btn-lg btn-primary btn-block"
  data-toggle="modal"
  data-target="#chart2">Trip Events</a>

  <div class="modal fade" id="chart2" tabindex="-1" role="dialog" aria-labelledby="chart2" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-body">
                  <%= high_chart("graph2", @chart2) %>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
      </div>
  </div>
  <br>
  <a href="#" class="btn btn-lg btn-primary btn-block"
  data-toggle="modal"
  data-target="#chart3">More Graphs</a>

  <div class="modal fade" id="chart3" tabindex="-1" role="dialog" aria-labelledby="chart3" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-body">
                  Graph Here!
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
      </div>
  </div>
  <br>
  <a href="#" class="btn btn-lg btn-primary btn-block"
  data-toggle="modal"
  data-target="#chart4">More Graphs</a>

  <div class="modal fade" id="chart4" tabindex="-1" role="dialog" aria-labelledby="chart4" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-body">
                  Graph Here!
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
      </div>
  </div>
  <br>
  <a href="#" class="btn btn-lg btn-primary btn-block"
  data-toggle="modal"
  data-target="#chart5">More Graphs</a>

  <div class="modal fade" id="chart5" tabindex="-1" role="dialog" aria-labelledby="chart5" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-body">
                  Graph Here!
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
      </div>
  </div>
  <br>
  <a href="#" class="btn btn-lg btn-primary btn-block"
  data-toggle="modal"
  data-target="#chart6">More Graphs</a>

  <div class="modal fade" id="chart6" tabindex="-1" role="dialog" aria-labelledby="chart6" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-body">
                  Graph Here!
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
      </div>
  </div>

<script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
        markers = handler.addMarkers(<%=raw @trip.gmaps_endpoints %>);
        polyline = handler.addPolyline(<%=raw @trip.gmaps_coordinates %>); 
        handler.bounds.extendWith(polyline);
        handler.fitMapToBounds();
    });
</script>


